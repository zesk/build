# Missing functions

[⬅ Return to index](index.md)
[⬅ Return to top](../index.md)

This file is automatically generated, and includes all functions which are not defined anywhere else in the documentation. **Warning**: assume anything here may change in a new version. 


### `addHashicorpAptKey` - Add keys to enable apt to download terraform directly from

Add keys to enable apt to download terraform directly from hashicorp.com

#### Usage

    addHashicorpAptKey

#### Exit codes

- `1` - if environment is awry
- `0` - All good to install terraform

#### Exit codes

- `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

### `argumentsToArray` - Not sure if this works really, need to pair with

Not sure if this works really, need to pair with
something in local script to make an array possibly

#### Exit codes

- `0` - Always succeeds

#### Arguments

- `settingsFile` - Required. Cached documentation settings.
- `template` - Required. A markdown template to use to map values. Post-processed with `markdown_removeUnfinishedSections`

#### Exit codes

- `0` - Success
- `1` - Template file not found

#### See Also

- [function bashDocumentFunction](./docs/tools/documentation.md) - [Document a function and generate a function template (markdown)](https://github.com/zesk/build/blob/main/bin/build/tools/documentation.sh#L375)
- [function _bashDocumentationFormatter_exit_code](./docs/tools/documentation.md) - [Format code blocks (does markdown_FormatList)](https://github.com/zesk/build/blob/main/bin/build/tools/documentation.sh#L698)

### `bashDocumentation_FindFunctionDefinition` - Find single location where a function is defined in a directory of shell scripts

Finds a function definition and outputs the file in which it is found
Searches solely `.sh` files. (Bash or sh scripts)

Succeeds IFF only one version of a function is found.

#### Usage

    bashDocumentation_FindFunctionDefinition directory fn

#### Arguments

- `directory` - The directory to search
- `fn` - A function to find the file in which it is defined

#### Examples

bashDocumentation_FindFunctionDefinition . usage

#### Exit codes

- `0` - if one or more function definitions are found
- `1` - if no function definitions are found

#### Environment

Generates a temporary file which is removed

#### See Also

- [function bashDocumentation_FindFunctionDefinitions](./docs/tools/documentation.md) - [Find where a function is defined in a directory of shell scripts](https://github.com/zesk/build/blob/main/bin/build/tools/documentation.sh#L633)

### `build-docs.sh` - Build documentation for build system.

Build documentation for build system.

Given that bash is not an ideal template language, caching is mandatory.

Uses a cache at `buildCacheDirectory`

#### Arguments

- `--force` - Force generation, ignore cache directives
- `--unlinked` - Show unlinked functions
- `--unlinked-update` - Update unlinked document file
- `--clean` - Erase the cache before starting.
- `--help` - I need somebody

#### Exit codes

- `0` - Success
- `1` - Issue with environment
- `2` - Argument error

#### Arguments

- `cacheDirectory` - Required. Directory. Cache directory.
- `envFile` - Required. File. Environment file used as base environment for all template generation.

#### Exit codes

- `0` - Always succeeds

### `test.sh` - Run Zesk Build tests

Run Zesk Build tests

#### Arguments

- `--one test` - Optional. Add one test to run.
- `--show` - Optional. Flag. List all tests.
- `--help` - Optional. This help.
- `--clean` - Optional. Delete test artifact files before starting.
- `--messy` - Optional. Do not delete test artifact files afterwards.

#### Exit codes

- `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

### `deployGitDefaultValue` - =========================================================================================

=========================================================================================

Generate .build.env

#### Exit codes

- `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

### `dumpFile` - dumpFile fileName0 [ fileName1 ... ]

dumpFile fileName0 [ fileName1 ... ]

#### Exit codes

- `0` - Always succeeds

### `fileSize` - Outputs value of virtual memory allocated for a process, value

Outputs value of virtual memory allocated for a process, value is in kilobytes

#### Arguments

- `file` - Required. File to get size of.

#### Exit codes

- `0` - Success
- `1` - Environment error

### `generateCommandsFile` - Generate our commands file

Generate our commands file

Argument commands must cd such that current directory is a project directory

#### Exit codes

- `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

### `maintenance.sh` - Toggle maintenance on or off. The default version of this

Toggle maintenance on or off. The default version of this modifies
the environment files for the application by modifying the `.env.local` file
and dynamically adding or removing any line which matches the MAINTENANCE variable.

#### Exit codes

- `0` - Always succeeds

#### Environment

BUILD_MAINTENANCE_VARIABLE - If you want to use a different environment variable than `MAINTENANCE`, set this environment variable to the variable you want to use.
BUILD_MAINTENANCE_ON_VALUE - If maintenance is on, the variable is set to this value. Defaults to `1`.
BUILD_MAINTENANCE_OFF_VALUE - If maintenance is off, the variable is set to this value. Defaults to a blank string (`""`).

### `installApacheConfiguration` - Configures Apache

Configures Apache

                     ▗▖         ▄▄▖
                     ▐▌        ▐▀▀█▖
  ▟██▖▐▙█▙  ▟██▖ ▟██▖▐▙██▖ ▟█▙    ▐▌
  ▘▄▟▌▐▛ ▜▌ ▘▄▟▌▐▛  ▘▐▛ ▐▌▐▙▄▟▌  ▗▛
 ▗█▀▜▌▐▌ ▐▌▗█▀▜▌▐▌   ▐▌ ▐▌▐▛▀▀▘ ▗▛
 ▐▙▄█▌▐█▄█▘▐▙▄█▌▝█▄▄▌▐▌ ▐▌▝█▄▄▌▗█▄▄▖
  ▀▀▝▘▐▌▀▘  ▀▀▝▘ ▝▀▀ ▝▘ ▝▘ ▝▀▀ ▝▀▀▀▘
      ▐▌

#### Arguments

- `applicationsHome` - Home directory for the application. User is derived from the owner.
- `--site-remove siteName` - Explicitly disable site

#### Exit codes

- `0` - Always succeeds

#### Environment

APPLICATION_USER - Automatically defined and used to map `.conf` files
APPLICATION_PATH - Automatically defined and used to map `.conf` files
APPLICATION_NAME - Automatically defined and used to map `.conf` files

### `ipAdd` - ipAdd

ipAdd
 group - Security Group ID
 region - AWS region
 port - service port
 email - developer email
 service tag - http|postgres|ssh|custom

#### Exit codes

- `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

### `isUpToDate` - Test whether the key needs to be updated

For security one should update keys every N days

This value would be better encrypted and tied to the key itself so developers
can not just update the value to avoid the security issue.

This tool checks the value and checks if it is `upToDateDays` of today; if not this fails.

It will also fail if:

- `upToDateDays` is less than zero or greater than 366
- `keyDate` is empty or has an invalid value

Otherwise, the tool *may* output a message to the console warning of pending days, and returns exit code 0 if the `keyDate` has not exceeded the number of days.

#### Usage

    isUpToDate keyDate upToDateDays

#### Arguments

- `keyDate` - Date formatted like `YYYY-MM-DD`
- `upToDateDays` - Days that key expires after `keyDate`

#### Examples

if !isUpToDate "$AWS_ACCESS_KEY_DATE" 90; then
      bigText Failed, update key and reset date
      exit 99
    fi

#### Exit codes

- `0` - Always succeeds

### `pipeline.sh` - Create environment file `.env` for build.

Create environment file `.env` for build.

#### Arguments

- `requireEnv1` - Optional. One or more environment variables which should be non-blank and included in the `.env` file.
- `optionalEnv1` - Optional. One or more environment variables which are included if blank or not

#### Exit codes

- `0` - Always succeeds

#### Environment

APPLICATION_VERSION - reserved and set to `runHook version-current` if not set already
APPLICATION_BUILD_DATE - reserved and set to current date; format like SQL.
APPLICATION_TAG - reserved and set to `runHook application-id`
APPLICATION_ID - reserved and set to `runHook application-tag`

### `mapValue` - Maps a string using an environment file

Maps a string using an environment file

#### Usage

    mapValue mapFile [ value ... ]

#### Arguments

- `mapFile` - a file containing bash environment definitions
- `value` - One or more values to map using said environment file

#### Exit codes

- `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

### `modificationSeconds` - Fetch the modification time in seconds from now of a

Fetch the modification time in seconds from now of a file as a timestamp

#### Usage

    modificationTime filename0 [ filename1 ... ]

#### Examples

modificationTime ~/.bash_profile

#### Exit codes

- `2` - If file does not exist
- `0` - If file exists and modification times are output, one per line

### `phpBuild` - Build deployment using composer, adding environment values to .env and

Build deployment using composer, adding environment values to .env and packaging vendor and additional

Override target file generated with environment variable $(consoleCode BUILD_TARGET) which must ae set during build
and on remote systems during deployment.

Files are specified from the application root directory.

This file generates the `.build.env` file, which contains the current environment and:

- DEPLOYMENT
- BUILD_TARGET
- BUILD_START_TIMESTAMP
- APPLICATION_TAG
- APPLICATION_ID

`DEPLOYMENT` is mapped to suffixes when `--suffix` not specified as follows:

- `rc` - production
- `d` - develop
- `s` - staging
- `t` - test

#### Arguments

- `--name tarFileName` - Set BUILD_TARGET via command line (wins)
- `--deployment deployment` - Set DEPLOYMENT via command line (wins)
- `--suffix versionSuffix` - Set tag suffix via command line (wins, default inferred from deployment)
- `--debug` - Enable debugging. Defaults to BUILD_DEBUG.
- `ENV_VAR1` - Optional. Environment variables to build into the deployed .env file
- `--` - Required. Separates environment variables to file list
- `file1 file2 dir3 ...` - Required. List of files and directories to build into the application package.

#### Exit codes

- `0` - Always succeeds

### `php-test.sh` - Test a docker-based PHP application during build

Test a docker-based PHP application during build

#### Arguments

- `deployment` - Required. String. `production` or `develop`

#### Exit codes

- `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

### `remoteDeployFinish` - This is run on the remote system after deployment; environment

This is run on the remote system after deployment; environment files are correct.
It is run inside the deployment home directory in the new application folder.

Current working directory on deploy is `deployHome/applicationId/app`.
Current working directory on cleanup is `applicationHome/`
Current working directory on undo is `applicationHome/`

applicationId - Required. String. Should match APPLICATION_ID in .env
deployPath - Required. String. Path where the deployments database is on remote system.
applicationPath - Required. String. Path on the remote system where the application is live.
--undo - Revert changes just made
--cleanup - Cleanup after success
--debug - Enable debugging. Defaults to `BUILD_DEBUG`

#### Exit codes

- `0` - Always succeeds

#### Examples

save=$(saveErrorExit)
    set +x
    ... some nasty stuff
    restoreErrorExit "$save"

#### Exit codes

- `0` - Always succeeds

#### See Also

- [function saveErrorExit](./docs/tools/todo.md) - [{summary}](https://github.com/zesk/build/blob/main/bin/build/tools/debug.sh#L86)

#### Examples

save=$(saveErrorExit)
    set +x
    ... some nasty stuff
    restoreErrorExit "$save"

#### Exit codes

- `0` - Always succeeds

#### See Also

- [function restoreErrorExit](./docs/tools/todo.md) - [{summary}](https://github.com/zesk/build/blob/main/bin/build/tools/debug.sh#L98)

#### Exit codes

- `0` - Always succeeds

### `serviceControlDaemon` - Runs a daemon which monitors files and operates on services.

Runs a daemon which monitors files and operates on services.

To request a specific action write the file with the action as the first line.

Allows control across user boundaries.

Specify actions more than once on the command line to specify more than one set of permissions.

#### Arguments

- `--home serviceHome` - Optional. Service directory home. Defaults to `/etc/service`.
- `--interval intervalSeconds` - Optional. Number of seconds to check for presence of the file. Defaults to 10.
- `--stat statFile` - Optional. Output the `svstat` status to this file every `intervalSeconds`. If not specified nothing is output.
- `--chirp chirpSeconds` - Optional. Output a message saying we\'re alive every `chirpSeconds` seconds.
- `--action actions` - Optional. String. Onr or more actions permitted `start`, `stop`, `restart`, use comma to separate. Default is `restart`.
- `service0` - Required. Directory. Service to control (e.g. `/etc/service/application/`)
- `file1` - Required. File. Absolute path to a file. Presence of  `file` triggers `action`

#### Exit codes

- `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

### `showContext` - Open a file in a shell using the program we

Open a file in a shell using the program we are using. Supports VSCode and PHPStorm.

#### Exit codes

- `0` - Always succeeds

#### Environment

EDITOR - Used as a default editor (first)
VISUAL - Used as another default editor (last)

#### Exit codes

- `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

### `sshSetup` - Set up SSH for a user with ID and backup

Set up SSH for a user with ID and backup keys in `~/.ssh`

Create a key for a user for SSH authentication to other servers.

#### Exit codes

- `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

### `stripAnsi` - Strip ANSI console escape sequences from a file

Strip ANSI console escape sequences from a file

#### Usage

    stripAnsi < input > output

#### Arguments

- None.

#### Exit codes

- `0` - Always succeeds

#### Local cache

None.

#### Environment

None.

#### Depends

    sed

#### Credits

Thanks to [commandlinefu tripleee](https://stackoverflow.com/questions/6534556/how-to-remove-and-all-of-the-escape-sequences-in-a-file-using-linux-shell-sc).

#### Exit codes

- `0` - Always succeeds

#### Arguments

- `--skip-commit` - Skip the commit if the files change

#### Exit codes

- `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

#### Usage



#### Exit codes

- `0` - Always succeeds

### `webApplicationConfigure` - Configure the web application server as root

Configure the web application server as root

#### Usage

    
    #### Usage
    
    
    
    #### Exit codes
    
    - `0` - Always succeeds

#### Exit codes

- `0` - Always succeeds

[⬅ Return to index](index.md)
[⬅ Return to top](../index.md)

Copyright &copy; 2024 [Market Acumen, Inc.](\'https://marketacumen.com?crcat=codeUnable to find "BUILD_COMPANY_LINK" (using index "/Users/kent/.build")crsource=zesk/buildUnable to find "BUILD_COMPANY_LINK" (using index "/Users/kent/.build")crcampaign=docsUnable to find "BUILD_COMPANY_LINK" (using index "/Users/kent/.build")crkw=\'Missing functions)
