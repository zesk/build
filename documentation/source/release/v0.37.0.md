# Zesk Build release v0.37.0

> Copyright &copy; 2025 Market Acumen, Inc.

## Deprecated changes

Name changes for consistency and `nounVerb` construction:

- `hostIPList` -> `networkIPList`
- Naming changes for more `nounVerb` and less `verbNoun`
- Added `networkMACAddressList` and `network.sh` and related
- Renamed `timestampToDate` to `dateFromTimestamp`- Documentation review and cleanup.
- Renamed `truncateFloat` -> `floatTruncate`
- Renamed `roundFloat` -> `floatRound`
- Renamed `_undo` -> `returnUndo`
- Renamed `_clean` -> `returnClean`
- Renamed `_code` -> `returnCode`
- File function changes:
    - `mostRecentlyModifiedFile` -> `fileModifiedRecentlyName`
    - `mostRecentlyModifiedTimestamp` -> `fileModifiedRecentlyTimestamp`
    - `betterType` -> `fileType`
    - `simplifyPath` -> `directoryPathSimplify`
    - `renameFiles` -> `filesRename`
    - `reverseFileLines` -> `fileReverseLines`
    - `renameLink` -> `linkRename`
    - `modificationTime` -> `fileModificationTime`
    - `modificationSeconds` -> `fileModificationSeconds`
    - `isEmptyFile` -> `fileIsEmpty`
    - `isNewestFile` -> `fileIsNewest`
    - `isOldestFile` -> `fileIsOldest`
    - `oldestFile` -> `fileOldest`
    - `newestFile` -> `fileNewest`
    - `modifiedDays` -> `fileModifiedDays`
    - `modifiedSeconds` -> `fileModifiedSeconds`
    - `requireFileDirectory` -> `fileDirectoryRequire`
    - `requireDirectory` -> `directoryRequire`
    - `modifiedDays` -> `fileModifiedDays`
    - `modifiedSeconds` -> `fileModifiedSeconds`
    - `requireFileDirectory` -> `fileDirectoryRequire`
    - `requireDirectory` -> `directoryRequire`
    - `requireDirectory` -> `directoryRequire`
    - `requireDirectory` -> `directoryRequire`
    - `requireDirectory` -> `directoryRequire`
    - `requireDirectory` -> `directoryRequire`
- Color test name changes:
    - `allColorTest` -> `colorSampleCodes`
    - `colorTest` -> `colorSampleStyles`
    - `semanticColorTest` -> `colorSampleSemanticStyles`
    - `colorComboTest` -> `colorSampleCombinations`
- Docker/Environment files"
    - `anyEnvToDockerEnv` -> `environmentFileToDocker`
    - `anyEnvToBashEnv` -> `environmentFileToBashCompatible`
    - `dockerEnvToBash` -> `environmentFileDockerToBashCompatible`
    - `dockerEnvFromBashEnv` -> `environmentFileBashCompatibleToDocker`

## Other changes

- Previous version: v0.36.1
- Making `interactiveBashSource` more verbose
- Made `buildEnvironmentLoad` (and also `buildEnvironmentGet`) always load relative paths from the home directory as
  `cd` breaks this function
- Added `--cd-away` for `testSuite`
- Fixed all tests for `--cd-away` flag
- Converted `mariadbInstall` to a `packageGroupInstall` call and provided initial mappings
- Refactored installation calls and moved to named files
- Issue with `_undo` not allowing `0` for exit code despite usefulness to use this to simply clean up things which need
  to be cleaned up anyway; so `_undo` now allows an exit code of `0` (which the docs said it allowed previously)
- Adding `mariadb` Darwin install notes to codebase for reference
- `gitPreCommitSetup` fails when no files are committed but also when only commit is a delete, so changing the semantics
  of this call such that it succeeds in the zero-file case as well.
- `environmentClean` now keeps `BUILD_HOME` by default as there is no way to locate ourselves after this has been
  deleted unless we store a file somewhere globally known (bad idea probably). So, in short, avoid deleting `BUILD_HOME`
  and only change it if you know what you are doing.- many tests had --cd-away issues, added `Test-Build-Home: true`
  flag
- Added `testBuildFunctionsCoverage` which checks to make sure all build functions have at least 1 test
- Added environment for Zesk Build only (`BUILD_COVERAGE_REQUIRED_DATE`) which is a drop-dead date for testing all
  functions in Zesk Build in the test suite. Currently set for August 1, 2025.
- Added `# Test-Build-Home: true` tag for tests to require certain tests to start with CWD at `buildHome`
- Standardized on `sha1sum` for file hashing as it is installed by default on most platform images part of `coreutils`
- Added `130` - `user-interrupt` to `exitString` and `_code`
- Added `--help` check for all build functions and added `--help` handler to many of them
- Added a third internal IDENTICAL tag `__IDENTICAL__` - used for `usageDocument`
- Ensured most help use `# __IDENTICAL usageDocument 1`
- Added `notify` to call `notify` hook with useful arguments - Added improvements to `bashFunctionComment` parsing to
  avoid the newline between functions issue
- The great `--help` addition to everything, added `identicalWatch` and `--token` parameter to `identicalCheck` to make
  it much faster
- `identicalWatch` is TBD but in progress
- All calls now support `--help` and the few which semantically make no sense support help via calling without
  arguments.
- Some improvements to `argument.sh` type handling and added `usageArgumentFlag` and a few other placeholders
- `usageDocument` now maps `{identical}` to the capitalized version of such post generation so you can add the word
  `IDENTICAL` to your documentation (`identicalCheck --help`)- Improved options to `bin/build.sh` and `bin/deploy.sh` to
  allow finer-grained control of the build and deploy pipelines.
- `decorate each` now supports a `--` argument to avoid blank argument lists causing read to sleep for 1 second. Need a
  select-able aware `read` in `bash`.
- `BUILD_COLORS` used to support the value `1` and no longer does; use `true` or `false` and if it does not match either
  it will be set automatically upon the first call to `hasColors` (this behavior is unchanged)- ---- identical repair
- Removed identical tag at end of argument loop handlers - solely ensured `shift` and was not useful
- Any function call which begins with an underscore generally does not have an associated `--help`
- We are moving from using the term `handler` (and `$handler`) in the source code everywhere (formerly `usage`); this
  migration will be done peace meal (in small sections) and should have no effect on any APIs.
- Initial version of `identicalWatch` seems to work (sort of) - can also just add `--watch` to `identicalCheck` to
  switch
  functions (requires at least one `--repair` directory) needs some additional optimization to perhaps cache saved
  identical blocks
- Moved documentation generation to `.docs` to keep it hidden from most other things which ignore `.` directories. (Like
  `deprecated.sh` which keeps finding ghost entries in here) - since this usually is just published (or you can move it)
  the dot represents its temporary nature
- `__catchEnvironment` -> `__catch` when it uses internal functions - looks simpler.
- Need better leak control on bin/build/tools.sh
- Identical refactor and clean, watch integration
- Did a removal of `mktemp` from everywhere except `fileTemporaryName` to track down temp file leaks
- `iTerm2Image` now outputs an error if the terminal is not `iTerm2` - use the `-i` or `--ignore` option to turn this
  off in your scripts.
- Enhanced developer announcement with current version and logo
- New development feature `decorate skip count` outputs text, one per line, but moves cursor
- `developerTrack` changed interface - now run after profile loads to record base and then any subsequent check shows
  differences between `--profile` and current stage.
- `project-deactivate` hook was not working, it now works- Fixed temp file leak in `urlContentLength`
- Fixed housekeeper leak in test, i think
- Important changes in `bashPrompt` implementation which I think should make `iTerm2` hidden prompts issue go away ...
  Using hiding codes improperly...
- Removing double `unapproved` output in `interactiveBashSource`
- 4x for production build size now - do some memory testing to see CPU 
- Speed of test suite is an issue. `--help` test is super slow.
- Fixed issue with `bashUserInput` not showing prompt - little known fact is that `read` displays the prompt on `stderr` and not on `stdout` - learn something new every day
- Fixed file leak in `usageDocumentComplex`
- ---- Updating docs in `_return`
