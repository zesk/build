#
# Zesk Build BitBucket Pipeline
#
# Copyright &copy; 2023 Market Acumen Inc.
#
# Test run: docker run -v $(pwd):/opt/atlassian/bitbucketci/agent/build -it atlassian/default-image:4
#
image: atlassian/default-image:4

pipelines:
  branches:
    develop:
      - step:
          deployment: develop
          name: Build and Test
          services:
            - docker
          script:
            - bin/build-test.sh develop
    main:
      - step:
          deployment: production
          name: Build, Test and Deploy
          services:
            - docker
          script:
            - bin/build-test.sh production
            - bin/deploy.sh
